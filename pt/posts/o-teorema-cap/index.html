<!doctype html><html lang=en><head><title>O Teorema CAP - Outro blog nerd</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Engenharia e Arquitetura de Software para o mundo real, não só o framework da modinha"><meta name=author content="Thiago Henrique"><meta property="og:title" content="O Teorema CAP"><meta property="og:description" content="Teorema CAP é uma boa ferramenta para ajudar na arquitetura de sistemas distribuídos, como microsserviços, e neste artigo abordaremos o mesmo primeiramente de forma teórica e posteriormente de forma prática."><meta property="og:type" content="article"><meta property="og:url" content="https://www.thiago.tech/pt/posts/o-teorema-cap/"><meta property="article:published_time" content="2022-02-27T22:11:27-03:00"><meta property="article:modified_time" content="2022-02-27T22:11:27-03:00"><meta property="og:site_name" content="Outro blog nerd"><meta name=twitter:card content="summary"><meta name=twitter:title content="O Teorema CAP"><meta name=twitter:description content="Teorema CAP é uma boa ferramenta para ajudar na arquitetura de sistemas distribuídos, como microsserviços, e neste artigo abordaremos o mesmo primeiramente de forma teórica e posteriormente de forma prática."><meta name=generator content="Hugo 0.80.0"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://www.thiago.tech/fontawesome/css/all.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"><link rel=stylesheet type=text/css href=/css/styles.css></head><body><div id=container><header><h1><a href=/pt/>Outro blog nerd</a></h1><ul id=social-media><li><a href=/en>English</a></li><li><a href=/es>Español</a></li><li><a href=https://github.com/thiagohdeplima title=GitHub><i class="fab fa-github fa-lg"></i></a></li><li><a href=https://twitter.com/thiagohdeplima title=Twitter><i class="fab fa-twitter fa-lg"></i></a></li><li><a href=https://linkedin.com/in/thiagohdeplima title=LinkedIn><i class="fab fa-linkedin fa-lg"></i></a></li><li><a href=https://stackoverflow.com/users/5036456/thiago-henrique title=StackOverflow><i class="fab fa-stack-overflow fa-lg"></i></a></li><li><a href=https://www.youtube.com//channel/UCDnuQ9P6JRdkG9HNw5yDp9Q title=Youtube><i class="fab fa-youtube fa-lg"></i></a></li></ul><p><em>With no bike-shed effect</em></p></header><nav><ul><li><a href=/pt/about/><i class="fa-li fa fa-lg"></i><span>Sobre</span></a></li></ul></nav><main><article><h1>O Teorema CAP</h1><aside><ul><li><time class=post-date datetime=2022-02-27T22:11:27-03:00>Feb 27, 2022</time></li><li><em><a href=/pt/tags/teorema-cap>#teorema-cap</a>
,
<a href=/pt/tags/sistemas-distribuidos>#sistemas-distribuidos</a></em></li><li>3 minute read</li></ul></aside><p>Sistemas distribuídos estão em todos os lugares nos dias atuais. Clusters de Kubernetes, bancos de dados distribuído como Cassandra ou MongoDB, arquiteturas de microsserviços, todos estes são exemplos de sistemas distribuídos.</p><p>Quando nestes sistemas passamos a ter dados envolvidos, a escolha da arquitetura deve ser muito bem pensada, <em>tradeoffs</em> devem ser compreendidos e bem análisados, do contrário, efeitos negativos da escolha da arquitetura podem pesar sobre o projeto que faz uso destes sistemas.</p><p>Este artigo pretende apresentar o Teorema CAP e ajudar o leitor a compreender como ele pode ajudar na escolha de uma arquitetura - ou ferramenta - adequada para cada cenário com sistemas distribuídos.</p><h2 id=mas-afinal-o-que-é-este-teorema-cap->Mas afinal, o que é este Teorema CAP ?</h2><p>O Teorema CAP foi concebido por Eric Brewer, ex-professor da Universidade de Berkeley e pesquisador de computação distribuída, e pode ser resumido em duas premissas simples:</p><figure><picture>
<source srcset=images/cap-dark.png media="(prefers-color-scheme: dark)"><source srcset=images/cap-light.png media="(prefers-color-scheme: light)"><img alt src=images/cap-dark.png style=width:50%;float:left;box-shadow:none></picture><figcaption><h4></h4></figcaption></figure><p></p><ol><li><p>Um sistema distribuído pode apresentar três propriedades, Consistência, disponibilidade (availability) e tolerância à particionamento dos dados em rede;</p></li><li><p>Via de regra, um sistema distribuído poderá contar com no máximo duas das três propriedades, ou seja, ao escolher duas, você abriu mão da terceira propriedade;</p></li></ol><p>Afim de garantir total compreensão do Teorema CAP, é importante esclarecer no que realmente consistem cada uma destas três propriedades.</p><h3 id=consistência>Consistência</h3><p>O termo consistência pode trazer alguma confusão na sua compreensão, principalmente porque na computação existem outros usos para ele que podem significar diferentes coisas em diferentes contextos.</p><figure><picture>
<source srcset=images/consistency-dark.png media="(prefers-color-scheme: dark)"><source srcset=images/consistency-light.png media="(prefers-color-scheme: light)"><img alt src=images/consistency-dark.png style=width:50%;float:right;box-shadow:none></picture><figcaption><h4></h4></figcaption></figure><p></p><p>No Teorema CAP, consistência diz respeito à capacidade de um sistema distribuído de disponibilizar um dado tão logo ele tenha sido escrito, ou seja, os dados fornecidos serão sempre os mais atuais (consistentes) que o sistema possuir.</p><p>O diagrama ao lado ilustra uma situação de consistência. No mesmo, temos uma representação de um cenário no qual foi cadastrado uma cliente com o nome Maria e ID 123.</p><p>Em um sistema consistente, quando um segundo usuário requisitar os dados desta usuária 123, os dados retornados serão os dados cadastrados pelo usuário um, mesmo que esta consulta ocorra imediatamente após este registro ter acontecido.</p><p>Isto vale para qualquer tipo de operação de escrita, seja ela a criação de um dado novo, uma atualização ou mesmo exclusão de dados. Em um sistema consistente, estas operações terão efeito imediato após sua execução.</p><h3 id=disponibilidade>Disponibilidade</h3><p>Disponibilidade é um conceito simples de se compreender: É a capacidade de sistema de sempre garantir uma resposta sem erros à quem lhe solicita algum dado.</p><p>Em termos práticos, sempre que você realizar uma requisição à um sistema distribuído disponível o mesmo te dará uma resposta com o dado que você solicitou, podendo este dado estar ou não consistente.</p><h3 id=particionamento>Particionamento</h3><p>Particionamento de rede diz respeito à distribuição dos dados entre os nós do sistema distribuído.</p><figure><picture>
<source srcset=images/partitioning-dark.png media="(prefers-color-scheme: dark)"><source srcset=images/partitioning-light.png media="(prefers-color-scheme: light)"><img alt src=images/partitioning-dark.png style=width:40%;float:right;box-shadow:none></picture><figcaption><h4></h4></figcaption></figure><p></p><p>Em um sistema distribuído com tolerância à particionamento nenhum dos servidores conterá a completude dos dados, cada pedaço do todo estará presente em um nó.</p><p>Ao lado temos uma ilustração que representa de uma forma simples um sistema distribuído com tolerância à particionamento armazenando cadastro de pessoas.</p><p>Note que as pessoas cadastradas estão espalhadas, e mesmo que haja cenários como o da pessoa John, cujos dados estão presentes em dois dos três nós deste sistema, os dados deste sistema estão totalmente dispersos entre os nós, nenhum deles tem a completude dos dados armazenados.</p><h2 id=consistência-e-disponibilidade>Consistência e Disponibilidade</h2><figure><picture>
<source srcset=images/cap-ca-dark.png media="(prefers-color-scheme: dark)"><source srcset=images/cap-ca-light.png media="(prefers-color-scheme: light)"><img alt src=images/cap-ca-dark.png style=width:30%;float:right;box-shadow:none></picture><figcaption><h4></h4></figcaption></figure><p></p></article><section class=post-nav><ul><li></li><li></li></ul></section></main><footer><ul><li><h6>Creative Commons by 4.0 |
Rendered by <a href=https://gohugo.io title=Hugo>Hugo</a> |
<a href=https://www.thiago.tech/index.xml>Subscribe</a></h6></li></ul></footer></div><script src=/js/scripts.js></script></body></html>